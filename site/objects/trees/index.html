
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for the Go-based Git-like version control system">
      
      
      
        <link rel="canonical" href="https://your-site-url.com/objects/trees/">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.49">
    
    
      
        <title>Trees - Git-like Version Control System</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Git-like Version Control System" class="md-header__button md-logo" aria-label="Git-like Version Control System" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Git-like Version Control System
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Trees
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Git-like Version Control System" class="md-nav__button md-logo" aria-label="Git-like Version Control System" data-md-component="logo">
      
  <img src="../../images/logo.png" alt="logo">

    </a>
    Git-like Version Control System
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../object_structure.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Object Structure
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../trees.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tree Objects
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../blobs.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blobs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commits.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commits
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Commands
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../add/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Add
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cat_file/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cat File
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../checkout/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Checkout
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../hash_object/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hash Object
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../init/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Init
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../log/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Log
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ls_tree/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LS Tree
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../status/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Status
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Advanced
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Advanced
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../log/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Log
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../trees.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tree Management
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Trees</h1>

<p>Tree Objects
In a version control system like Git, tree objects represent directories. They are responsible for organizing files and subdirectories (other tree objects) in a hierarchical structure. A tree object is a container for references to blob objects (representing files) and other tree objects (representing subdirectories).</p>
<p>Overview of Tree Objects
Purpose: Tree objects are used to represent the state of a directory at a particular point in time. They maintain references to both files (in the form of blobs) and subdirectories (in the form of other trees).
Contents: A tree object contains:
Entries: A list of file and subdirectory references.
Mode: A file type and permissions representation.
Hash: The hash of the object that uniquely identifies the tree.
Structure: The structure of a tree object mirrors the filesystem hierarchy. It represents a snapshot of a directory, where each entry is either a file (blob) or a subdirectory (tree).
Tree Object Format
A tree object has a simple structure. It contains the following fields for each entry:</p>
<p>Mode: A 4-byte field that defines the file type and permissions (e.g., 100644 for a regular file, 040000 for a directory).
Filename: The name of the file or subdirectory.
Hash: The hash of the corresponding blob (for files) or tree (for subdirectories).
Each entry in the tree object points to either a blob object (for regular files) or another tree object (for directories).</p>
<p>Example of a Tree Object
Let's consider the following directory structure:</p>
<p>scss
Copy code
/
├── hello.txt (Blob)
└── subdir/
    └── file_in_subdir.txt (Blob)
In this structure:</p>
<p>hello.txt is a regular file, represented as a blob object.
subdir/ is a directory, represented as a tree object.
file_in_subdir.txt is a regular file inside subdir/, represented as another blob object.
The tree object for this directory would look something like:</p>
<p>Copy code
tree 3f3a5a17f5e3a698cb674d5a924d2411f7809cf6
100644 hello.txt 9fceb02b3f9b8d3420f2634ef8d0db4bdb8d73c9
040000 subdir 39b593089317c268b7f9a04ca14ec94c1a5197b1
In this example:</p>
<p>The tree object has two entries:
The first entry refers to the hello.txt file (mode 100644).
The second entry refers to the subdir/ directory (mode 040000).
The hash for hello.txt is 9fceb02b3f9b8d3420f2634ef8d0db4bdb8d73c9, which points to the corresponding blob object.
The hash for subdir/ is 39b593089317c268b7f9a04ca14ec94c1a5197b1, which points to the corresponding tree object for subdir.
Creating a Tree Object
When you create a directory or modify its contents, a tree object is created to represent the directory structure. The process is as follows:</p>
<p>Adding Files: When a file is added to the directory, a corresponding blob object is created. The file’s contents are hashed and stored as a blob.
Adding Subdirectories: When a subdirectory is created, a new tree object is created to represent the subdirectory.
Building the Tree: The tree object is built by combining the hashes of the blobs and trees that represent the files and subdirectories in the directory. This tree object points to these objects, forming a hierarchy of trees and blobs.
Hashing: The hash of the tree object is generated based on its content (the mode, filename, and hash of the objects it references). This ensures the uniqueness and immutability of the tree.
Storing Tree Objects
Tree objects are stored in the .git/objects/ directory with a filename based on their hash. The structure for storing tree objects is the same as for blob objects:</p>
<p>The first two characters of the hash represent the directory.
The remaining characters form the filename.
For example, the tree object with hash 3f3a5a17f5e3a698cb674d5a924d2411f7809cf6 would be stored at:</p>
<p>bash
Copy code
.git/objects/3f/3a5a5f17f5e3a698cb674d5a924d2411f7809cf6
Tree Object Mode Codes
Tree objects use mode codes to distinguish between different types of files and directories:</p>
<p>100644: A regular file.
100755: An executable file.
040000: A directory.
120000: A symbolic link.
160000: A gitlink (used for submodules).
Example Directory Tree and Tree Object
Consider this simple directory tree:</p>
<p>css
Copy code
/
├── README.md
├── src/
│   └── main.go
└── docs/
    └── install.md
The corresponding tree object might look like:</p>
<p>css
Copy code
tree 4a0f5c7ab0bc8f1ad12fb1de8ac839241db1db09
100644 README.md 1d9c7b2e5f5e10f49083edcc91f46f98a04bc295
040000 src 8d824e4c7b2db44035da6329b7a597d08884b171
040000 docs 68a4c2099b1d91e401b53f9172de0212ae199d43
The tree object 4a0f5c7ab0bc8f1ad12fb1de8ac839241db1db09 represents the root directory.
It has three entries:
README.md (a regular file, mode 100644).
src (a directory, mode 040000).
docs (a directory, mode 040000).
Each directory (src and docs) will have its own tree object that lists files in them.
Summary
Tree objects represent directories and contain references to files (blobs) and subdirectories (trees).
They are organized in a hierarchical structure, mirroring the file system.
Each entry in a tree object contains a mode, filename, and hash pointing to either a blob or another tree.
Tree objects allow for efficient organization of files and directories in the version control system.
The tree object’s hash is unique and ensures integrity of the directory structure.
Example Usage in the Git-like System
In your Go-based Git-like version control system, when a user adds files or directories to the repository, tree objects are created to represent the structure. These tree objects are then used to generate commit objects that represent snapshots of the repository at particular points in time.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.88dd0f4e.min.js"></script>
      
        <script src="../../js/custom.js"></script>
      
    
  </body>
</html>